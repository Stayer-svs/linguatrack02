<!-- app_vocab/templates/app_vocab/word_list.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–¢—Ä–µ–Ω–∞–∂–µ—Ä —Å–ª–æ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .controls {
            text-align: center;
            margin-bottom: 20px;
        }
        .reverse-btn {
            padding: 10px 20px;
            background-color: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π */
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
        }
        .reverse-btn:hover {
            background-color: #45a049;
        }
        .word-card {
            border: 1px solid #ddd;
            padding: 15px;
            margin: 15px auto;
            border-radius: 8px;
            max-width: 500px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .question {
            font-weight: bold;
            font-size: 1.4em;
            text-align: center;
            margin-bottom: 10px;
        }
        .transcription {
            text-align: center;
            font-style: italic;
            color: #666;
            margin-bottom: 10px;
        }
        .answer {
            text-align: center;
            font-size: 1.2em;
            color: #2E7D32; /* –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω—ã–π */
            margin: 15px 0;
            display: none; /* –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã–≤–∞–µ–º –æ—Ç–≤–µ—Ç */
        }
        .action-buttons {
            text-align: center;
        }
        .btn {
            padding: 8px 16px;
            margin: 0 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .show-btn {
            background-color: #2196F3; /* –°–∏–Ω–∏–π */
            color: white;
        }
        .know-btn {
            background-color: #4CAF50; /* –ó–µ–ª–µ–Ω—ã–π */
            color: white;
        }
        .dont-know-btn {
            background-color: #f44336; /* –ö—Ä–∞—Å–Ω—ã–π */
            color: white;
        }
        .btn:hover {
            opacity: 0.9;
        }
        .stats {
            text-align: center;
            font-size: 0.9em;
            color: #999;
        }
        .filter-btn {
            padding: 8px 16px;
            margin: 5px;
            background-color: #e0e0e0; /* –°–µ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
            color: #333;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .filter-btn.active {
            background-color: #2196F3; /* –°–∏–Ω–∏–π –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞ */
            color: white;
        }
        .filter-btn:hover {
            background-color: #d5d5d5;
        }
        .filter-btn.active:hover {
            background-color: #1976D2;
        }

    </style>
</head>
<body>
    <h1>üó£Ô∏è –¢—Ä–µ–Ω–∞–∂–µ—Ä —Å–ª–æ–≤</h1>

    <!-- –ë–ª–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Ä–µ–≤–µ—Ä—Å) -->
    <div class="controls">
        {% if is_reverse %}
            <a href="?reverse=0"><button class="reverse-btn">–†–µ–∂–∏–º: –ü–ï–†–ï–í–û–î ‚Üí –°–õ–û–í–û</button></a>
            <p><small>(–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–≤–æ–¥, –Ω—É–∂–Ω–æ –≤—Å–ø–æ–º–Ω–∏—Ç—å —Å–ª–æ–≤–æ)</small></p>
        {% else %}
            <a href="?reverse=1"><button class="reverse-btn">–†–µ–∂–∏–º: –°–õ–û–í–û ‚Üí –ü–ï–†–ï–í–û–î</button></a>
            <p><small>(–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–ª–æ–≤–æ, –Ω—É–∂–Ω–æ –≤—Å–ø–æ–º–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥)</small></p>
        {% endif %}
    </div>

    <!-- –ù–û–í–´–ô –ë–õ–û–ö: –§–∏–ª—å—Ç—Ä—ã –ø–æ —É—Ä–æ–≤–Ω—é –∑–Ω–∞–Ω–∏—è -->
    <div class="controls">
        <h3>–ö–∞–∫–∏–µ —Å–ª–æ–≤–∞ —É—á–∏—Ç—å?</h3>
        <div>
            <a href="?filter=all&reverse={% if is_reverse %}1{% else %}0{% endif %}">
                <button class="filter-btn {% if current_filter == 'all' %}active{% endif %}">–í—Å–µ —Å–ª–æ–≤–∞</button>
            </a>
            <a href="?filter=new&reverse={% if is_reverse %}1{% else %}0{% endif %}">
                <button class="filter-btn {% if current_filter == 'new' %}active{% endif %}">–ù–æ–≤—ã–µ (—É—Ä–æ–≤–µ–Ω—å 0)</button>
            </a>
            <a href="?filter=for_review&reverse={% if is_reverse %}1{% else %}0{% endif %}">
                <button class="filter-btn {% if current_filter == 'for_review' %}active{% endif %}">–î–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è (—É—Ä. 1-4)</button>
            </a>
            <a href="?filter=learned&reverse={% if is_reverse %}1{% else %}0{% endif %}">
                <button class="filter-btn {% if current_filter == 'learned' %}active{% endif %}">–ò–∑—É—á–µ–Ω–Ω—ã–µ (—É—Ä. 5+)</button>
            </a>
        </div>
    </div>


    <!-- –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤-–∫–∞—Ä—Ç–æ—á–µ–∫ -->
    {% if words %}
        {% for word in words %}
            <div class="word-card">
                <!-- –í–æ–ø—Ä–æ—Å (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∂–∏–º–∞ —Ä–µ–≤–µ—Ä—Å–∞) -->
                <div class="question">
                    {% if is_reverse %}
                        {{ word.translation }}
                    {% else %}
                        {{ word.original }}
                    {% endif %}
                </div>

                <!-- –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –≤ –ø—Ä—è–º–æ–º —Ä–µ–∂–∏–º–µ) -->
                {% if not is_reverse and word.transcription %}
                    <div class="transcription">[{{ word.transcription }}]</div>
                {% endif %}

                <!-- –û—Ç–≤–µ—Ç (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç) -->
                <div class="answer" id="answer-{{ word.id }}">
                    {% if is_reverse %}
                        <strong>{{ word.original }}</strong>
                        {% if word.transcription %}
                            <br><em>[{{ word.transcription }}]</em>
                        {% endif %}
                    {% else %}
                        <strong>{{ word.translation }}</strong>
                    {% endif %}
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="action-buttons">
                    <!-- –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥" -->

                        <button class="btn show-btn" onclick="showAnswer({{ word.id }})">–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç</button>


                    <!-- –ö–Ω–æ–ø–∫–∏ "–ó–Ω–∞—é"/"–ù–µ –∑–Ω–∞—é" (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç—ã) -->
                    <span id="knowledge-buttons-{{ word.id }}" style="display: none;">
                        <a href="?word_id={{ word.id }}&action=know{% if is_reverse %}&reverse=1{% endif %}">
                            <button class="btn know-btn">–ó–Ω–∞—é ‚úì</button>
                        </a>
                        <a href="?word_id={{ word.id }}&action=dont_know{% if is_reverse %}&reverse=1{% endif %}">
                            <button class="btn dont-know-btn">–ù–µ –∑–Ω–∞—é ‚úó</button>
                        </a>
                    </span>
                </div>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ª–æ–≤–∞ -->
                <div class="stats">
                    –£—Ä–æ–≤–µ–Ω—å: {{ word.knowledge_level }} | –î–æ–±–∞–≤–ª–µ–Ω–æ: {{ word.date_added|date:"d.m.Y" }}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p style="text-align: center;">–ü–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤. <a href="/admin/">–î–æ–±–∞–≤—å—Ç–µ –∏—Ö —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É</a>.</p>
    {% endif %}

    <!-- –ü—Ä–æ—Å—Ç–æ–π JavaScript –¥–ª—è –ø–æ–∫–∞–∑–∞ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏) -->
    <script>
        function showAnswer(wordId) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–ª–æ–∫ —Å –æ—Ç–≤–µ—Ç–æ–º
            document.getElementById('answer-' + wordId).style.display = 'block';
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ "–ó–Ω–∞—é"/"–ù–µ –∑–Ω–∞—é"
            document.getElementById('knowledge-buttons-' + wordId).style.display = 'inline';
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ü–æ–∫–∞–∑–∞—Ç—å –æ—Ç–≤–µ—Ç"
            event.target.style.display = 'none';
        }
    </script>
</body>
</html>
